<div class="position-relative custom-dropdown-container">
  <div
    class="custom-dropdown-placeholder d-flex align-items-center justify-content-between"
    (click)="toggleDropdown()"
    [class.disabled]="disabled"
  >
    <span>{{ selectedDepartment || 'Select Department' }}</span>
    <i class="bi bi-chevron-down" [class.rotated]="dropdownOpen"></i>
  </div>
  <div
    *ngIf="dropdownOpen"
    class="custom-dropdown-menu"
    [class.show]="dropdownOpen"
  >
    <div class="search-container">
      <input
        type="text"
        class="search-input"
        placeholder="Search departments..."
        (input)="filterDepartments($event)"
        [value]="searchText"
        (click)="$event.stopPropagation()"
      >
    </div>
    <div class="dropdown-options">
      <div
        *ngFor="let dept of filteredDepartments; trackBy: trackByFn"
        class="dropdown-item"
        (click)="selectDepartment(dept)"
        [class.active]="dept.departmentName === selectedDepartment"
      >
        {{ dept.departmentName }}
      </div>
      <div *ngIf="filteredDepartments.length === 0" class="no-results">
        No departments found
      </div>
    </div>
  </div>
</div>
