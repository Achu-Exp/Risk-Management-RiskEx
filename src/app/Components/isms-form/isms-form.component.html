<div class="container">
  <div class="form">
    <form [formGroup]="ismsForm" (ngSubmit)="onsubmit()">
      <div class="field">
        <div style="display: none;">
          <label for="">Risk Type <span class="required">*</span> :</label>
          <input for="" id="risktype" formControlName="riskType">
        </div>
         <app-textarea label="Risk Name" isRequired="*" formControlName="riskName"></app-textarea>
         <app-textarea label="Description" isRequired="*" marginLeft="50" formControlName="description"></app-textarea>
         @if(ismsForm.get("description")){

          @if (ismsForm.get("description")?.hasError('maxlength')) {
            <div class="text-danger">maximum length is 1000</div>

          }
          @else if (ismsForm.get("description")?.hasError('minlength')) {
            <div class="text-danger">minimum length is 15</div>

          }
        }




         <app-textarea label="Impact Of Risk" isRequired="*" marginLeft="27" formControlName="riskImpact"></app-textarea>

         @if(ismsForm.get("riskImpact")){

          @if (ismsForm.get("riskImpact")?.hasError('maxlength')) {
            <div class="text-danger">maximum length is 1000</div>

          }
          @else if (ismsForm.get("riskImpact")?.hasError('minlength')) {
            <div class="text-danger">minimum length is 15</div>

          }
        }
         <app-textarea label="Project" marginLeft="92" formControlName="projectId"></app-textarea>

      </div>
      <div class="field"  >
        <h5>Current Risk Assessment <span class="required">*</span></h5>

        <table>
          <tr>
            <th> </th>
            <th>Confidenciality</th>
            <th>Integrity</th>
            <th>Availability</th>
            <th>Privacy</th>
          </tr>
          <tr>
            <td>Likelihood</td>
            <td>

            <app-dropdown  [options]="dropdownData"
            [displayField]="'type'"
            [valueField]="'value'"
            width="13.33"
            id="dropdownassessmentLikelihood"  formControlName="confidentialityLikelihood"></app-dropdown>
          </td>
            <td> <app-dropdown  [options]="dropdownData"
              [displayField]="'type'"
              [valueField]="'value'"
              width="13.33"
              id="dropdownassessmentLikelihood" class="dropdownassessment"   formControlName="IntegrityLikelihood"></app-dropdown>
            </td>
            <td> <app-dropdown  [options]="dropdownData"
              [displayField]="'type'"
              [valueField]="'value'"
              width="13.33"
              id="dropdownassessmentLikelihood" class="dropdownassessment"   formControlName="availabiltyLikelihood"></app-dropdown></td>
            <td> <app-dropdown  [options]="dropdownData"
              [displayField]="'type'"
              [valueField]="'value'"
              width="13.33"
              id="dropdownassessmentLikelihood" class="dropdownassessment"   formControlName="privacyLikelihood"></app-dropdown></td>

          </tr>
          <tr>
            <td>Impact</td>
            <td><app-dropdown  [options]="dropdownData"
              [displayField]="'type'"
              [valueField]="'value'"
              width="13.33"
              id="dropdownassessmentimpact" class="dropdownassessment"   formControlName="confidentialityImpact"></app-dropdown></td>
            <td><app-dropdown  [options]="dropdownData"
              [displayField]="'type'"
              [valueField]="'value'"
              width="13.33"
              id="dropdownassessmentimpact" class="dropdownassessment"   formControlName="IntegrityImpact"></app-dropdown></td>
            <td><app-dropdown  [options]="dropdownData"
              [displayField]="'type'"
              [valueField]="'value'"
              width="13.33"
              id="dropdownassessmentimpact" class="dropdownassessment"   formControlName="availabiltyImpact"></app-dropdown></td>
            <td><app-dropdown  [options]="dropdownData"
              [displayField]="'type'"
              [valueField]="'value'"
              width="13.33"
              id="dropdownassessmentimpact" class="dropdownassessment"   formControlName="privacyImpact"></app-dropdown></td>

          </tr>
        </table>





      </div>

      <div class="field" id="thirdfield">
        <app-textarea label="Risk Mitigation" isRequired="*"  marginLeft="123" formControlName="mitigation"></app-textarea>
        @if(ismsForm.get("mitigation")){

          @if (ismsForm.get("mitigation")?.hasError('maxlength')) {
            <div class="text-danger" >maximum length is 1000</div>

          }
          @else if (ismsForm.get("mitigation")?.hasError('minlength')) {
            <div class="text-danger" id="mitigationError">minimum length is 15</div>

          }
        }


        <app-textarea label="Risk Contingency" marginLeft="110" formControlName="contingency"></app-textarea>
        <app-textarea label="Responsibility Of Action" isRequired="*" formControlName="responsibilityOfAction"></app-textarea>
        @if(ismsForm.get("responsibilityOfAction")){

          @if (ismsForm.get("responsibilityOfAction")?.hasError('maxlength')) {
            <div class="text-danger" >maximum length is 20</div>

          }
          @else if (ismsForm.get("responsibilityOfAction")?.hasError('minlength')) {
            <div class="text-danger" id="mitigationError">minimum length is 5</div>

          }
        }


        <div class="actionDate">
          <div class="actionDateLabel">
            <label id="actionlabel">Planned Action Date  <span class="required">*</span> :</label>

          </div>
          <div>
            <input type="date" class="textarea" id="textareaspace" formControlName="plannedActionDate" >

          </div>




        </div>
        <div class="reviewer">
          <div>
            <label >Reviewer <span class="required">*</span> :</label>

          </div>
          <div>

            <app-dropdown  [options]="dropdownDataReviewer"
            [displayField]="'name'"
            [valueField]="'email'"
            width="47.25"
            id="reviewerDropdown" class="dropdown"  formControlName="reviewer"></app-dropdown>

          </div>



        </div>

        <div class="action">
          <div>
            <button type="submit" value="Save" class="savecancel">Save</button>
          <button value="Cancel" id="cancelbtn" class="savecancel">Cancel</button>

          </div>

        </div>


      </div>



    </form>

  </div>

</div>
